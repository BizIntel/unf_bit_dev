#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ПриЗаписи(Отказ, Замещение)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если ЭлектроннаяПодписьВМоделиСервиса.ИспользованиеВозможно() Тогда
		СоответствиеТиповХранилищ = Новый Соответствие;
		СоответствиеТиповХранилищ.Вставить(
			Перечисления.ЛогическиеХранилищаСертификатов.MY, Перечисления.ТипХранилищаСертификатов.ПерсональныеСертификаты);
		СоответствиеТиповХранилищ.Вставить(
			Перечисления.ЛогическиеХранилищаСертификатов.AddressBook, Перечисления.ТипХранилищаСертификатов.СертификатыПолучателей);
		СоответствиеТиповХранилищ.Вставить(
			Перечисления.ЛогическиеХранилищаСертификатов.CA, Перечисления.ТипХранилищаСертификатов.СертификатыУдостоверяющихЦентров);
		СоответствиеТиповХранилищ.Вставить(
			Перечисления.ЛогическиеХранилищаСертификатов.ROOT, Перечисления.ТипХранилищаСертификатов.КорневыеСертификаты);
		
		Для Каждого Запись Из ЭтотОбъект Цикл
			ХранилищеСертификатов.Добавить(Запись.Сертификат.Получить(), СоответствиеТиповХранилищ.Получить(Запись.ЛогическоеХранилище));	
		КонецЦикла;
	КонецЕсли;

КонецПроцедуры

#КонецОбласти

#КонецЕсли