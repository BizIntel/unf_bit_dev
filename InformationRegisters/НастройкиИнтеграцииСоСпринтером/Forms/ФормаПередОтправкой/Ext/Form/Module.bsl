
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	ПолноеИмяФайлаОтправки = Параметры.ПолноеИмяФайлаОтправки;
	ИнформационноеСообщение = "Для отправки файла выгрузки требуется предварительно сохранить его по адресу:
	|" + ПолноеИмяФайлаОтправки;
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	ПодключитьОбработчикОжидания("ОжиданиеПередОтправкой", 10);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура ОжиданиеПередОтправкой()
	
	ОписаниеОповещения = Новый ОписаниеОповещения(
		"ОжиданиеПередОтправкойПослеПроверкиСуществованияФайла", 
		ЭтотОбъект);
		
	ОперацииСФайламиЭДКОКлиент.ПолучитьСвойстваФайла(ОписаниеОповещения, ПолноеИмяФайлаОтправки);
	
КонецПроцедуры

&НаКлиенте
Процедура ОжиданиеПередОтправкойПослеПроверкиСуществованияФайла(Результат, ВходящийКонтекст) Экспорт
	
	Если Результат.Выполнено И Результат.СвойстваФайла.Существует Тогда
		
		ОтключитьОбработчикОжидания("ОжиданиеПередОтправкой");
		//закрываем форму, переходя к отправке
		Закрыть(Истина);
		
	КонецЕсли;
	
КонецПроцедуры


#КонецОбласти