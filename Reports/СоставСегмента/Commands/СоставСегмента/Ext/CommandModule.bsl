
&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	Если НЕ ЗначениеЗаполнено(ПараметрКоманды) Тогда
		Возврат;
	КонецЕсли;
	
	Если ВыбранаГруппа(ПараметрКоманды) Тогда
		ВызватьИсключение НСтр("ru = 'Нельзя выбирать группу сегментов.'");
	КонецЕсли;
	
	ПараметрыИОтборОтчета = Новый Структура("Сегмент", ПараметрКоманды);
	
	ПараметрыФормы = Новый Структура("КлючВарианта, Отбор, СформироватьПриОткрытии, ВидимостьКомандВариантовОтчетов, ЗакрыватьПриЗакрытииВладельца",
		"СоставСегментаКонтекст", ПараметрыИОтборОтчета, Истина, Ложь, Истина);
	
	ОткрытьФорму("Отчет.СоставСегмента.Форма", 
		ПараметрыФормы,
		ПараметрыВыполненияКоманды.Источник,
		Истина,
		ПараметрыВыполненияКоманды.Окно);
	
КонецПроцедуры

&НаСервере
Функция ВыбранаГруппа(Сегмент)
	
	Возврат Сегмент.ЭтоГруппа;
	
КонецФункции