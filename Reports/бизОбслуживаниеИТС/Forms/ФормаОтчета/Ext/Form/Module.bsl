

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Параметры.СформироватьПриОткрытии = Истина;
    
КонецПроцедуры

&НаСервере
Процедура ПередЗагрузкойВариантаНаСервере(Настройки)
	ОтборСервисИнженер = Настройки.Отбор.Элементы[1];
	
	//ОтборСервисИнженер.Использование = Истина;
		
	СотрудникПользователя = бизСлужебныйНаСервере.ПолучитьСсылкуНаСотрудникаПользователя();	
	
	ОтборСервисИнженер.ПравоеЗначение = СотрудникПользователя;
	Если РольДоступна("ПолныеПрава")Тогда
		ОтборСервисИнженер.РежимОтображения = РежимОтображенияЭлементаНастройкиКомпоновкиДанных.БыстрыйДоступ;
	Иначе ОтборСервисИнженер.РежимОтображения = РежимОтображенияЭлементаНастройкиКомпоновкиДанных.Недоступный;
		ФиксированныеНастройки = Отчет.КомпоновщикНастроек.ФиксированныеНастройки;
		КоллекцияОтборовПользователя = Настройки.Отбор.Элементы;
		КоллекцияОтборовПользователя.Удалить(КоллекцияОтборовПользователя[1]);
		ОтборСервисИнженерФиксированный = ФиксированныеНастройки.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
		ОтборСервисИнженерФиксированный.ЛевоеЗначение = Новый ПолеКомпоновкиДанных("СервисИнженер");
		ОтборСервисИнженерФиксированный.ВидСравнения = ВидСравненияКомпоновкиДанных.Равно;
		ОтборСервисИнженерФиксированный.ПравоеЗначение = СотрудникПользователя;		
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Процедура ПередЗагрузкойПользовательскихНастроекНаСервере(Настройки)
	Если РольДоступна("ПолныеПрава")Тогда
		
		КоллекцияЭлементовНастройки = Настройки.Элементы;
		
		Для каждого ЭлементНастройки Из КоллекцияЭлементовНастройки Цикл
			
			Если ТипЗнч(ЭлементНастройки)= Тип("ЭлементОтбораКомпоновкиДанных") И ТипЗнч(ЭлементНастройки.ПравоеЗначение) = Тип("СправочникСсылка.Сотрудники") Тогда
				
				ОтборСервисИнженер = ЭлементНастройки;
				СотрудникПользователя = бизСлужебныйНаСервере.ПолучитьСсылкуНаСотрудникаПользователя();	
				Если НЕ СотрудникПользователя.Наименование = "Иванов Артур Александрович" Тогда
					ОтборСервисИнженер.ПравоеЗначение = СотрудникПользователя;
					ОтборСервисИнженер.РежимОтображения = РежимОтображенияЭлементаНастройкиКомпоновкиДанных.БыстрыйДоступ;
					ОтборСервисИнженер.Использование = Истина;
				КонецЕсли
				
			КонецЕсли;	
			
		КонецЦикла;
		
	КонецЕсли;
КонецПроцедуры


 



