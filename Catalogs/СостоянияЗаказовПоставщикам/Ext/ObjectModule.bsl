#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ПриКопировании(ОбъектКопирования)
	
	Цвет = Новый ХранилищеЗначения(ОбъектКопирования.Цвет.Получить());
	
КонецПроцедуры

Процедура ПередЗаписью(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	// Состояние "Завершен" всегда последним,
	// запрет установки большего порядка подсистемой БСП.НастройкаПорядкаЭлементов
	Если Ссылка = Справочники.СостоянияЗаказовПоставщикам.Завершен Тогда
		ЭтотОбъект.РеквизитДопУпорядочивания = 99999;
	Иначе
		Если РеквизитДопУпорядочивания = 99999 И Не ЭтоНовый() Тогда
			ЭтотОбъект.РеквизитДопУпорядочивания = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Ссылка, "РеквизитДопУпорядочивания");
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли