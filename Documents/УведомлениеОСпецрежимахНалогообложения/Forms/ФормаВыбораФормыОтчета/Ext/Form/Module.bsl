#Область ОбработчикиСобытийФормы
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Данные = Неопределено;
	Параметры.Свойство("Данные", Данные);
	АдресДанные = ПоместитьВоВременноеХранилище(Данные, УникальныйИдентификатор);

	Параметры.Свойство("Организация", Организация);
	Параметры.Свойство("ЗначениеКопирования", ЗначениеКопирования);
	Параметры.Свойство("ИмяОтчета", ИмяОтчета);
	ЗначениеВРеквизитФормы(Отчеты[ИмяОтчета].ПолучитьТаблицуФорм(), "ТаблицаФорм");
	
	Элементы.Создать.Доступность = ЗначениеЗаполнено(Организация);
	
	СписокВыбора = Элементы.ПолеРедакцияФормы.СписокВыбора;
	СписокВыбора.Очистить();
	Для Каждого Стр Из ТаблицаФорм Цикл 
		СписокВыбора.Добавить(Стр.ИмяФормы, Стр.ОписаниеФормы);
		ПолеРедакцияФормы = Стр.ИмяФормы;
	КонецЦикла;
КонецПроцедуры

&НаКлиенте
Процедура ОрганизацияПриИзменении(Элемент)
	Элементы.Создать.Доступность = ЗначениеЗаполнено(Организация);
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы
&НаКлиенте
Процедура Создать(Команда)
	Данные = ПолучитьИзВременногоХранилища(АдресДанные);
	ПараметрыОткрытия = Новый Структура("Организация,ЗначениеКопирования,Данные", Организация, ЗначениеКопирования, Данные);
	ФормаОтчета = ПолучитьФорму("Отчет."+ИмяОтчета+".Форма."+ПолеРедакцияФормы, ПараметрыОткрытия, ВладелецФормы);
	Если ФормаОтчета <> Неопределено Тогда 
		ФормаОтчета.Открыть();
		Закрыть();
	Иначе
		Сообщение = Новый СообщениеПользователю;
		Сообщение.Текст = "Не удалось создать уведомление для " + Организация;
		Сообщение.Сообщить();
	КонецЕсли;
КонецПроцедуры

#КонецОбласти