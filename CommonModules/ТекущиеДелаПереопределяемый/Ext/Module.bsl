////////////////////////////////////////////////////////////////////////////////
// Подсистема "Текущие дела".
//
////////////////////////////////////////////////////////////////////////////////

#Область ПрограммныйИнтерфейс

// Заполняет список обработчиков текущих дел.
//
// Параметры:
//  Обработчики - Массив - массив ссылок на модули менеджеров или общие модули, в которых
//                         определена процедура ПриЗаполненииСпискаТекущихДел.
//
Процедура ПриОпределенииОбработчиковТекущихДел(Обработчики) Экспорт
	
	Обработчики.Добавить(Обработки.ПомощникВводаНачальныхОстатков);
	Обработчики.Добавить(Справочники.ЗаписиКалендаряПодготовкиОтчетности);
	Обработчики.Добавить(Документы.Событие);
	Обработчики.Добавить(Документы.ЗаданиеНаРаботу);
	
	// Заказ покупателя и заказ-наряд
	Обработчики.Добавить(Документы.ЗаказПокупателя);
	
	Обработчики.Добавить(Документы.ЗаказПоставщику);
	Обработчики.Добавить(Документы.ЗаказНаПроизводство);
	Обработчики.Добавить(Обработки.ЗакрытиеМесяца);
	
	// Напоминания пользователя
	Обработчики.Добавить(ОбщегоНазначения.ОбщийМодуль("ОбсужденияСервер"));
	
	// ИнтернетПоддержкаПользователей
	ИнтернетПоддержкаПользователей.ПриОпределенииОбработчиковТекущихДел(Обработчики);
	// Конец ИнтернетПоддержкаПользователей
	
	Обработчики.Добавить(Справочники.Организации);
	
КонецПроцедуры

// Получает список разделов командного интерфейса в заданном порядке.
//
// Параметры:
//  Разделы - Массив - массив разделов командного интерфейса.
//                     Задает начальный порядок разделов в панели текущих дел.
//
Процедура ПриОпределенииПорядкаРазделовКомандногоИнтерфейса(Разделы) Экспорт
	
	// УНФ Начало
	Разделы.Добавить(НСтр("ru = 'Начало работы'"));
	Разделы.Добавить(НСтр("ru = 'Налоги и отчетность'"));
	Разделы.Добавить(НСтр("ru = 'События'"));
	Разделы.Добавить(НСтр("ru = 'Задания на работу'"));
	Разделы.Добавить(НСтр("ru = 'Заказы покупателей'"));
	Разделы.Добавить(НСтр("ru = 'Заказ наряды'"));
	Разделы.Добавить(НСтр("ru = 'Заказы поставщикам'"));
	Разделы.Добавить(НСтр("ru = 'Заказы на производство'"));
	Разделы.Добавить(НСтр("ru = 'Закрытие месяца'"));
	Разделы.Добавить(НСтр("ru = 'Напоминания'"));
	// УНФ Конец
	
	// ЭДО
	Разделы.Добавить(НСтр("ru = 'ЭДО'"));
	// Конец ЭДО
	
	Разделы.Добавить(Метаданные.Подсистемы.ЗарплатаИПерсонал);
	
	// ИнтернетПоддержкаПользователей
	ИнтернетПоддержкаПользователей.ПриОпределенииПорядкаРазделовКомандногоИнтерфейса(Разделы);
	// Конец ИнтернетПоддержкаПользователей
	
КонецПроцедуры

// Отключает текущие дела.
//
// Параметры:
//  ОтключаемыеДела - Массив - массив строк идентификаторов текущих дел, которые нужно отключать.
//
Процедура ПриОтключенииТекущихДел(ОтключаемыеДела) Экспорт
	
КонецПроцедуры

// Устанавливает общие параметры запросов для расчета текущих дел.
// См. ТекущиеДела.УстановитьОбщиеПараметрыЗапросов().
//
// Параметры:
//  Запрос - выполняемый запрос.
//  ОбщиеПараметрыЗапросов - Структура - общие значения для расчета текущих дел.
//
Процедура УстановитьОбщиеПараметрыЗапросов(Запрос, ОбщиеПараметрыЗапросов) Экспорт
	
	Запрос.УстановитьПараметр("СотрудникиПользователя", УправлениеНебольшойФирмойСервер.ПолучитьСотрудниковПользователя());
	
КонецПроцедуры

// Процедура-обработчик, вызываемая в форме расшифровки текущего дела.
// Устанавливает параметры открытия формы и необходимые отборы списка формы.
//
// Параметры:
//  Форма - УправляемаяФорма
//  Список - ДинамическийСписок
//
Процедура ПриСозданииНаСервере(Форма, Список) Экспорт
	
КонецПроцедуры

// Процедура-обработчик, вызываемая в форме расшифровки текущего дела.
// Позволяет заменить сохраненные значения реквизитов формы.
// Заменяет сохраненные значения реквизитов формы на свойства Форма.Параметры.СтруктураБыстрогоОтбора.
//
// Параметры:
//  Форма - УправляемаяФорма
//  Настройки - Соответствие
//
Процедура ПередЗагрузкойДанныхИзНастроекНаСервере(Форма, Настройки) Экспорт

КонецПроцедуры

#КонецОбласти