
Процедура ПредставлениеПериодаВыбратьПериод(Форма, ИмяСпискаОтбора="Список", ИмяПоляОтбора="Дата", СтруктураИменЭлементов = Неопределено) Экспорт
	
	Параметры = Новый Структура("Форма, ИмяСпискаОтбора, ИмяПоляОтбора", Форма, ИмяСпискаОтбора, ИмяПоляОтбора);
	Если НЕ (СтруктураИменЭлементов = Неопределено) Тогда
		Параметры.Вставить("СтруктураИменЭлементов", СтруктураИменЭлементов);
	КонецЕсли;
	
	Оповещение = Новый ОписаниеОповещения("ПредставлениеПериодаНажатиеЗавершение", ЭтотОбъект, Параметры);
	
	Диалог = Новый ДиалогРедактированияСтандартногоПериода;
	Если СтруктураИменЭлементов = Неопределено Тогда
		Диалог.Период = Форма.ОтборПериод;
	Иначе
		Диалог.Период = Форма[СтруктураИменЭлементов.ОтборПериод];
	КонецЕсли;
	Диалог.Показать(Оповещение);
	
КонецПроцедуры

Процедура ПредставлениеПериодаНажатиеЗавершение(НовыйПериод, Параметры) Экспорт
	
	Если НовыйПериод = Неопределено Тогда
		Возврат;
	КонецЕсли;
	Форма			= Параметры.Форма;
	ИмяСпискаОтбора = Параметры.ИмяСпискаОтбора;
	ИмяПоляОтбора	= Параметры.ИмяПоляОтбора;
	
	Если Параметры.Свойство("СтруктураИменЭлементов") Тогда
	
		Если ТипЗнч(НовыйПериод)=Тип("СтандартныйПериод") Тогда
			Форма[Параметры.СтруктураИменЭлементов.ОтборПериод] = НовыйПериод;
		ИначеЕсли ТипЗнч(НовыйПериод)=Тип("Дата") Тогда
			Форма[Параметры.СтруктураИменЭлементов.ОтборПериод].ДатаОкончания = НовыйПериод;
		КонецЕсли;
		
		Форма[Параметры.СтруктураИменЭлементов.ПредставлениеПериода] = РаботаСОтборамиКлиентСервер.ОбновитьПредставлениеПериода(Форма[Параметры.СтруктураИменЭлементов.ОтборПериод]);
		РаботаСОтборамиКлиентСервер.УстановитьОтборПоПериоду(
			Форма[ИмяСпискаОтбора].КомпоновщикНастроек.Настройки.Отбор, 
			Форма[Параметры.СтруктураИменЭлементов.ОтборПериод].ДатаНачала, 
			Форма[Параметры.СтруктураИменЭлементов.ОтборПериод].ДатаОкончания, ИмяПоляОтбора);
			
		Если Параметры.СтруктураИменЭлементов.Свойство("СобытиеОповещения") Тогда
			Оповестить(Параметры.СтруктураИменЭлементов.СобытиеОповещения);
		КонецЕсли;
			
	Иначе
		
		Если ТипЗнч(НовыйПериод)=Тип("СтандартныйПериод") Тогда
			Форма.ОтборПериод = НовыйПериод;
		ИначеЕсли ТипЗнч(НовыйПериод)=Тип("Дата") Тогда
			Форма.ОтборПериод.ДатаОкончания = НовыйПериод;
		КонецЕсли;
		
		Форма.ПредставлениеПериода = РаботаСОтборамиКлиентСервер.ОбновитьПредставлениеПериода(Форма.ОтборПериод);
		РаботаСОтборамиКлиентСервер.УстановитьОтборПоПериоду(Форма[ИмяСпискаОтбора].КомпоновщикНастроек.Настройки.Отбор, Форма.ОтборПериод.ДатаНачала, Форма.ОтборПериод.ДатаОкончания, ИмяПоляОтбора);
		
	КонецЕсли;
	
	#Если ВебКлиент Тогда
		Форма.ОбновитьОтображениеДанных();
	#КонецЕсли 

КонецПроцедуры

Процедура СвернутьРазвернутьПанельОтборов(Форма, Видимость, СтруктураИменЭлементов = Неопределено) Экспорт
	
	ИнтерфейсТакси = Истина;
	#Если ВебКлиент Тогда
	ИнтерфейсТакси = (ТекущийВариантИнтерфейсаКлиентскогоПриложения() = ВариантИнтерфейсаКлиентскогоПриложения.Такси);
	#КонецЕсли

	Если СтруктураИменЭлементов = Неопределено Тогда
		Форма.Элементы.ФильтрыНастройкиИДопИнфо.Видимость	= Видимость;
		Форма.Элементы.ДекорацияРазвернутьОтборы.Видимость	= НЕ Видимость;
		Форма.Элементы.ПраваяПанель.Ширина = ?(Видимость, ?(ИнтерфейсТакси, 25, 24), 0);
	Иначе
		Форма.Элементы[СтруктураИменЭлементов.ФильтрыНастройкиИДопИнфо].Видимость	= Видимость;
		Форма.Элементы[СтруктураИменЭлементов.ДекорацияРазвернутьОтборы].Видимость = НЕ Видимость;
		Форма.Элементы[СтруктураИменЭлементов.ПраваяПанель].Ширина = ?(Видимость, ?(ИнтерфейсТакси, 25, 24), 0);
	КонецЕсли;
	
КонецПроцедуры